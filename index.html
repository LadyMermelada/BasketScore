<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Basket Score Pro v1.20.0</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <section id="tab-cancha" class="tab-content active">
        <div class="header-tools">
            <h1>BASKET<span style="color:var(--primary)">SCORE</span></h1>
            <div class="backup-btns">
                <button class="btn-tool" onclick="exportData()">EXP</button>
                <button class="btn-tool" onclick="document.getElementById('importFile').click()">IMP</button>
                <input type="file" id="importFile" style="display:none" onchange="importData(event)">
            </div>
        </div>

        <div class="main-layout">
            <div class="court-wrapper" id="courtContainer"></div>

            <div class="sidebar">
                <div class="stat-card highlight-card">
                    <div class="stat-header"><h4>Global (30d)</h4><div class="stat-value" id="val-global">--</div></div>
                </div>
                <div class="stat-card" onmouseleave="resetStats('tl')">
                    <div class="stat-header"><h4>Tiros Libres</h4><div class="stat-value" id="val-tl">--</div></div>
                    <div class="stat-date" id="date-tl"></div>
                    <div class="chart-container"><canvas id="chart-tl"></canvas></div>
                </div>
                <div class="stat-card" onmouseleave="resetStats('2p')">
                    <div class="stat-header"><h4>2 Puntos</h4><div class="stat-value" id="val-2p">--</div></div>
                    <div class="stat-date" id="date-2p"></div>
                    <div class="chart-container"><canvas id="chart-2p"></canvas></div>
                </div>
                <div class="stat-card" onmouseleave="resetStats('3p')">
                    <div class="stat-header"><h4>3 Puntos</h4><div class="stat-value" id="val-3p">--</div></div>
                    <div class="stat-date" id="date-3p"></div>
                    <div class="chart-container"><canvas id="chart-3p"></canvas></div>
                </div>
            </div>
        </div>

        <div class="quick-log-container">
            <h3 class="section-title">√öltimas 5 Sesiones</h3>
            <table>
                <thead><tr><th>Fecha</th><th>Zona</th><th>Ratio</th><th>%</th><th>‚öôÔ∏è</th></tr></thead>
                <tbody id="quickLogBody"></tbody>
            </table>
        </div>
    </section>

    <section id="tab-club" class="tab-content">
        <div class="club-header">
            <div class="club-info">
                <div class="club-logo">üèÄ</div>
                <div>
                    <h2 class="club-name">Goga Basket Club</h2>
                    <span class="club-members-count">12 Miembros</span>
                </div>
            </div>
            <button class="btn-switch-club">‚áÑ</button>
        </div>

        <details class="members-details">
            <summary class="members-summary">
                <span style="font-weight: bold; color: var(--primary);">üë• Gesti√≥n de Miembros</span>
                <button class="btn-invite" onclick="event.preventDefault(); alert('Link de invitaci√≥n copiado al portapapeles!');">üîó Invitar</button>
            </summary>
            <div class="admin-panel">
                <div class="member-list" id="mockMembersList"></div>
            </div>
        </details>

        <div style="margin-top: 20px;">
            <h3 class="section-title">üèÜ Leaderboard (30 D√≠as)</h3>
            <div class="leaderboard-grid">
                <div class="lb-card">
                    <h4>üéØ Especialista Libres</h4>
                    <div class="lb-leader" id="leader-tl">--</div>
                    <ul class="lb-top5" id="top5-tl"></ul>
                </div>
                <div class="lb-card">
                    <h4>üî• Middy (2 Pts)</h4>
                    <div class="lb-leader" id="leader-2p">--</div>
                    <ul class="lb-top5" id="top5-2p"></ul>
                </div>
                <div class="lb-card">
                    <h4>üí¶ Triplista (3 Pts)</h4>
                    <div class="lb-leader" id="leader-3p">--</div>
                    <ul class="lb-top5" id="top5-3p"></ul>
                </div>
                <div class="lb-card">
                    <h4>üëë Rey del Entreno</h4>
                    <div class="lb-leader" id="leader-sessions">--</div>
                    <ul class="lb-top5" id="top5-sessions"></ul>
                </div>
            </div>
        </div>

        <div class="feed-container" style="margin-top: 20px;">
            <h3 class="section-title">‚ö° Actividad Reciente</h3>
            <div id="activityFeed"></div>
        </div>
    </section>

    <section id="tab-perfil" class="tab-content">
        <div class="header-simple"><h2>üë§ Mi Perfil</h2></div>

        <div class="career-stats-container">
            <div class="career-box"><span class="career-label">Tiros Totales</span><span class="career-val" id="career-total">0</span></div>
            <div class="career-box"><span class="career-label">% Hist√≥rico</span><span class="career-val" id="career-pct">0%</span></div>
        </div>

        <div class="chart-controls">
            <select id="profileChartMetric" onchange="updateProfileChart()">
                <option value="global" selected>Global</option>
                <option value="3p">Solo 3 Puntos</option>
                <option value="2p">Solo 2 Puntos</option>
                <option value="tl">Solo Tiros Libres</option>
            </select>
            <select id="profileTimeRange" onchange="updateProfileChart()">
                <option value="7">√öltimos 7 d√≠as</option>
                <option value="30" selected>√öltimos 30 d√≠as</option>
                <option value="90">√öltimos 3 meses</option>
                <option value="180">√öltimos 6 meses</option>
                <option value="365">√öltimo a√±o</option>
            </select>
        </div>

        <div class="chart-container" style="height: 150px; margin-bottom: 20px;">
            <canvas id="profile-chart"></canvas>
        </div>

        <details class="history-details">
            <summary>Ver Historial de Sesiones Completo</summary>
            <div class="filters-container">
                <select id="filterZone" onchange="updateProfileTable()"><option value="all">Todas las zonas</option><option value="3p">Solo 3 Puntos</option><option value="2p">Solo 2 Puntos</option><option value="tl">Solo Tiros Libres</option></select>
                <input type="date" id="filterDate" onchange="updateProfileTable()">
            </div>
            <div class="table-container">
                <table>
                    <thead><tr><th>FECHA</th><th>ZONA</th><th>RATIO</th><th>%</th><th>NOTA</th></tr></thead>
                    <tbody id="logBody"></tbody>
                </table>
            </div>
        </details>
    </section>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('cancha')"><span class="nav-icon">üèÄ</span><span class="nav-text">Cancha</span></div>
        <div class="nav-item" onclick="switchTab('club')"><span class="nav-icon">üèÜ</span><span class="nav-text">Club</span></div>
        <div class="nav-item" onclick="switchTab('perfil')"><span class="nav-icon">üë§</span><span class="nav-text">Perfil</span></div>
    </nav>

    <div class="modal-overlay" id="overlay" onclick="closeModal()"></div>
    <div id="modal">
        <button class="modal-close-btn" onclick="closeModal()">√ó</button>
        <h2 id="zoneText"></h2>
        <span class="modal-label">Fecha</span><input type="date" id="inputDate">
        <span class="modal-label">Total Lanzados</span><input type="number" id="inputTotal" min="1">
        <span class="modal-label">Total Encestados</span><input type="number" id="inputMade" min="0">
        <span class="modal-label">Nota</span><textarea id="inputNote" maxlength="50"></textarea>
        <p id="errorMsg" style="color:var(--danger); font-size:0.7rem; display:none; text-align:center; font-weight:bold; margin-bottom:10px;">‚ö†Ô∏è Verifica los datos ingresados</p>
        <button id="saveBtn" class="btn-save">Confirmar ‚úì</button>
    </div>

    <script src="script.js"></script>
</body>
</html>
